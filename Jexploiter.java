package multi_purpose_hacking_project;

import java.net.*;
import java.io.*;

// exploit class uses tor onion.
// old code.....move over from on FRONTLINE....


public class Jexploiter {

	
// ========== private=========================	
private String m_Host;
private String m_Buffer;
private int m_Port;
private Socket m_socket;  
private InetAddress m_inetAddr; 
private  DataOutputStream m_os; 

// tor proxy
InetSocketAddress HiddenerProxyAddress;
Proxy HiddenProxy;
Socket underlying;
SocketAddress sa;

private void Connect(InetAddress adress,int port)
{
	m_inetAddr=adress;
m_Port=port;

HiddenerProxyAddress = new InetSocketAddress("127.0.0.1", 9150);
HiddenProxy = new Proxy(Proxy.Type.SOCKS, HiddenerProxyAddress);
 underlying = new Socket(HiddenProxy);
sa = new InetSocketAddress(m_inetAddr,m_Port);//                         "www.facebook.com", 80);
try {
	underlying.connect(sa);
} catch (IOException e) {
	// TODO Auto-generated catch block
	e.printStackTrace();
}
		
	

/*
	
	  try {
		m_socket = new Socket(m_inetAddr, m_Port);
	} catch (UnknownHostException e) {
		// TODO Auto-generated catch block
		e.printStackTrace();
	} catch (IOException e) {
		// TODO Auto-generated catch block
		e.printStackTrace();
	}
*/
	  
	  
	  
	  
	  System.out.println("Connected");




}








// ================= public ===================
public Jexploiter()
{
m_Host=null;
m_Buffer=null;
m_Port=0;
m_socket=null;  
m_inetAddr=null;
m_os=null;
}





public String IPtoHostname(InetAddress  IP)
{
	m_inetAddr=IP;
	
	
m_Host=	m_inetAddr.getHostName();
	//  System.out.println(host);	
	return m_Host;
}

public String HostnameToIP(String hostname)
{

	try {
		m_inetAddr= InetAddress.getByName(hostname);
	} catch (UnknownHostException e) {
		// TODO Auto-generated catch block
		e.printStackTrace();
	}
	
m_Host=	m_inetAddr.getHostAddress();
return m_Host;

}



public void RunExploit(InetAddress adress,int port,String buffer)
{
m_Buffer=buffer;
Connect(adress,port);
// socket send......
// test return values....
// shell.
try {
	m_os = new DataOutputStream(m_socket.getOutputStream());
} catch (IOException e) {
	// TODO Auto-generated catch block
	e.printStackTrace();
}

try {
	m_os.writeUTF(m_Buffer);
} catch (IOException e) {
	// TODO Auto-generated catch block
	e.printStackTrace();
}

try {
	m_os.close();
} catch (IOException e) {
	// TODO Auto-generated catch block
	e.printStackTrace();
}

// exploit send.



}



}  // end class